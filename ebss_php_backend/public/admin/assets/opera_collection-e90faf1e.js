import{d as a,j as y,k,_ as D,a as r,o as s,f as g,w as o,c as p,i as _,t as F,b as u}from"./index-c354119d.js";const h={name:"list",data:function(){return{table:"opera_collection",join_tables:["opera"],percent:0,saveFormData:{},searchObj:{},columns:[{title:"剧名",key:"opera_id",customRender:e=>a("span",null,[e.record.opera_info.name])},{title:"集数",key:"sort_num"},{title:"观看次数",key:"view_count"},{title:"添加时间",key:"add_time"},{title:"视频地址",key:"video_url"}]}},components:{PlusOutlined:y(()=>k(()=>import("./PlusOutlined-1c66d07a.js"),["./PlusOutlined-1c66d07a.js","./index-c354119d.js","./index-21567c1d.css"],import.meta.url))},created(){},methods:{change(e,t,v){this.percent=e.file.percent.toFixed(2),e.file.status==="done"&&(this.saveFormData.video_url=e.file.response.savename)}}},w=["href"],C={key:1},U=u("div",null,[u("span",{class:"myicon icon-zengjia"}),u("div",{style:{"margin-top":"8px"}},"上传")],-1);function j(e,t,v,R,L,c){const i=r("RemoteSelect"),l=r("a-form-item"),m=r("a-input"),f=r("a-upload"),d=r("a-form"),b=r("Crud");return s(),g(b,null,{save:o(()=>[a(d,{ref:"save_form",model:e.saveFormData,"label-col":{span:6},"wrapper-col":{span:18}},{default:o(()=>[a(l,{label:"视频名称",name:"opera_id",rules:[{required:!0,message:""}]},{default:o(()=>[a(i,{table:"opera",name_key:"name",value:e.saveFormData.opera_id,"onUpdate:value":t[0]||(t[0]=n=>e.saveFormData.opera_id=n)},null,8,["value"])]),_:1}),a(l,{label:"集数",name:"sort_num",rules:[{required:!0,message:""}]},{default:o(()=>[a(m,{value:e.saveFormData.sort_num,"onUpdate:value":t[1]||(t[1]=n=>e.saveFormData.sort_num=n)},null,8,["value"])]),_:1}),a(l,{label:"观看次数",name:"view_count"},{default:o(()=>[a(m,{value:e.saveFormData.view_count,"onUpdate:value":t[2]||(t[2]=n=>e.saveFormData.view_count=n)},null,8,["value"])]),_:1}),a(l,{label:"视频",name:"video_url",rules:[{required:!0,message:""}]},{default:o(()=>[e.saveFormData.video_url?(s(),p("a",{key:0,class:"ant-btn",target:"_blank",href:e.baseURL+"/"+e.saveFormData.video_url,style:{"margin-bottom":"10px"}},"打开",8,w)):_("",!0),e.percent>0&&e.percent<100?(s(),p("div",C,"上传进度:"+F(e.percent)+"%",1)):_("",!0),a(f,{showUploadList:!1,"list-type":"picture-card",action:e.baseURL+"/index/index/upload",onChange:c.change},{default:o(()=>[U]),_:1},8,["action","onChange"])]),_:1})]),_:1},8,["model"])]),search:o(()=>[a(d,{layout:"inline"},{default:o(()=>[a(l,null,{default:o(()=>[a(i,{table:"opera",name_key:"name",value:e.searchObj.opera_id,"onUpdate:value":t[3]||(t[3]=n=>e.searchObj.opera_id=n)},null,8,["value"])]),_:1})]),_:1})]),_:1})}const B=D(h,[["render",j]]);export{B as default};
