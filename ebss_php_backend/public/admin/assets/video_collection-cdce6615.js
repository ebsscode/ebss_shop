import{b as a,s as y,u as h,_ as k,a as r,o as s,h as D,w as t,c as v,j as _,t as g,d as i}from"./index-dd67864f.js";const F={name:"list",data:function(){return{table:"video_collection",join_tables:["video"],percent:0,saveFormData:{},searchObj:{},columns:[{title:"剧名",key:"video_id",customRender:e=>a("span",null,[e.record.video.name]),sorter:!0},{title:"集数",key:"sort_num",sorter:!0},{title:"观看次数",key:"view_count",sorter:!0},{title:"添加时间",key:"add_time"},{title:"视频地址",key:"video_url"}]}},components:{PlusOutlined:y(()=>h(()=>import("./PlusOutlined-27727863.js"),["./PlusOutlined-27727863.js","./index-dd67864f.js","./index-e69258b4.css"],import.meta.url))},created(){},methods:{change(e,o,p){this.percent=e.file.percent.toFixed(2),e.file.status==="done"&&(this.saveFormData.video_url=e.file.response.savename)}}},w=["href"],C={key:1},U=i("div",null,[i("span",{class:"QQ811565456 hewei-zengjia"}),i("div",{style:{"margin-top":"8px"}},"上传")],-1);function j(e,o,p,R,L,c){const u=r("RemoteSelect"),l=r("a-form-item"),d=r("a-input"),f=r("a-upload"),m=r("a-form"),b=r("Crud");return s(),D(b,null,{save:t(()=>[a(m,{ref:"save_form",model:e.saveFormData,"label-col":{span:6},"wrapper-col":{span:18}},{default:t(()=>[a(l,{label:"视频名称",name:"video_id",rules:[{required:!0,message:""}]},{default:t(()=>[a(u,{table:"video",name_key:"name",value:e.saveFormData.video_id,"onUpdate:value":o[0]||(o[0]=n=>e.saveFormData.video_id=n)},null,8,["value"])]),_:1}),a(l,{label:"集数",name:"sort_num",rules:[{required:!0,message:""}]},{default:t(()=>[a(d,{value:e.saveFormData.sort_num,"onUpdate:value":o[1]||(o[1]=n=>e.saveFormData.sort_num=n)},null,8,["value"])]),_:1}),a(l,{label:"观看次数",name:"view_count"},{default:t(()=>[a(d,{value:e.saveFormData.view_count,"onUpdate:value":o[2]||(o[2]=n=>e.saveFormData.view_count=n)},null,8,["value"])]),_:1}),a(l,{label:"视频",name:"video_url",rules:[{required:!0,message:""}]},{default:t(()=>[e.saveFormData.video_url?(s(),v("a",{key:0,class:"ant-btn",target:"_blank",href:e.staticURL()+"/"+e.saveFormData.video_url,style:{"margin-bottom":"10px"}},"打开",8,w)):_("",!0),e.percent>0&&e.percent<100?(s(),v("div",C,"上传进度:"+g(e.percent)+"%",1)):_("",!0),a(f,{showUploadList:!1,"list-type":"picture-card",action:e.baseURL()+"/api/index/upload",onChange:c.change},{default:t(()=>[U]),_:1},8,["action","onChange"])]),_:1})]),_:1},8,["model"])]),search:t(()=>[a(m,{layout:"inline"},{default:t(()=>[a(l,null,{default:t(()=>[a(u,{table:"video",name_key:"name",value:e.searchObj.video_id,"onUpdate:value":o[3]||(o[3]=n=>e.searchObj.video_id=n)},null,8,["value"])]),_:1})]),_:1})]),_:1})}const B=k(F,[["render",j]]);export{B as default};
