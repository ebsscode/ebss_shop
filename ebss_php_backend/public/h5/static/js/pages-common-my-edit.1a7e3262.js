(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-common-my-edit"],{1299:function(t,e,a){"use strict";(function(t){a("7a82");var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("c7eb")),r=n(a("1da1"));a("a9e3"),a("d81d"),a("14d9"),a("a434"),a("e9c4"),a("d3b7");var o={data:function(){return{baseURL:this.baseURL,imageList:[]}},props:{value:{type:[String]},chooseCount:{type:Number,value:5},max:{type:Number,value:100}},watch:{value:{handler:function(e,a){if(e){if(1==this.max&&(this.imageList=[{url:e}]),this.max>1)try{this.imageList=JSON.parse(e).map((function(t){return{url:t}}))}catch(n){this.imageList=[],t.warn("ImgUpload解析错出：",n)}}else this.imageList=[];this.emitValue()},immediate:!0}},computed:{rduLength:function(){return this.max-this.imageList.length}},methods:{chooseImage:function(){var t=this;uni.chooseImage({count:this.rduLength<this.chooseCount?this.rduLength:this.chooseCount,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){var a=e.tempFilePaths;t.uploadFiles(a)}})},uploadFiles:function(e){var a=this;return(0,r.default)((0,i.default)().mark((function n(){var r,o;return(0,i.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a.imageList.push({progress:0}),uni.showLoading({title:"请稍后..",mask:!0}),r=null,n.prev=3,n.next=6,a.uploadImage(e[0]);case 6:r=n.sent,t.log(11,r),n.next=14;break;case 10:return n.prev=10,n.t0=n["catch"](3),t.log(n.t0),n.abrupt("return");case 14:!1!==r?(e.splice(0,1),o=JSON.parse(JSON.stringify(a.imageList)),o[o.length-1].url=r,a.imageList=o,e.length>0&&a.rduLength>0?a.uploadFiles(e):uni.hideLoading(),a.emitValue()):(a.imageList.pop(),uni.hideLoading(),uni.showToast({title:"上传中出现问题，已终止上传",icon:"none",mask:!0,duration:2e3}));case 15:case"end":return n.stop()}}),n,null,[[3,10]])})))()},uploadImage:function(e){var a=this;return new Promise((function(n,i){a.uploadTask=uni.uploadFile({url:a.baseURL+"/index/index/upload",filePath:e,name:"file",formData:{},success:function(e){var a=JSON.parse(e.data)||{};t.log("111",a),1==a.code&&a.savename?n(a.savename):i("接口返回错误")},fail:function(){i("网络链接错误")}}),a.uploadTask.onProgressUpdate((function(t){a.imageList[a.imageList.length-1].progress=t.progress}))}))},delImage:function(t){var e=this;uni.showModal({content:"确定要丢弃这张图片么？",success:function(a){a.confirm&&(e.imageList.splice(t,1),e.emitValue())}})},emitValue:function(){1==this.max&&(this.imageList.length?this.$emit("input",this.imageList[0].url):this.$emit("input","")),this.max>1&&(this.imageList.length?this.$emit("input",JSON.stringify(this.imageList.map((function(t){return t.url})))):this.$emit("input","[]"))},previewImage:function(t){var e=this,a=this.imageList.map((function(t){return e.baseURL+"/"+t.url}));uni.previewImage({current:a[t],urls:a,indicator:"number"})}}};e.default=o}).call(this,a("5a52")["default"])},"3c5a":function(t,e,a){"use strict";a.r(e);var n=a("fdd5"),i=a("a0bf");for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);var o=a("f0c5"),s=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"4208da68",null,!1,n["a"],void 0);e["default"]=s.exports},"47a6":function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 通用 */\r\n/* 文字尺寸 */\r\n/* 页面配置 */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.upload-content[data-v-6287558c]{display:flex;align-items:center;margin-bottom:10px;margin-right:10px;flex-wrap:wrap}.upload-item[data-v-6287558c]{position:relative;float:left;width:%?150?%;height:%?150?%;margin-right:8px;margin-bottom:8px}.upload-item .upload-img[data-v-6287558c]{width:100%;height:100%;border-radius:%?8?%}.upload-item .upload-del-btn[data-v-6287558c]{position:absolute;right:-8px;top:-11px;width:%?36?%;height:%?36?%;border:%?4?% solid #fff;border-radius:100px}.upload-item .upload-progress[data-v-6287558c]{position:absolute;left:0;top:0;display:flex;align-items:center;justify-content:center;width:100%;height:100%;background-color:rgba(0,0,0,.4);color:#fff;font-size:%?24?%;border-radius:%?8?%}.upload-add-btn[data-v-6287558c]{position:relative;float:left;width:%?150?%;height:%?150?%;z-index:99;border-radius:%?8?%;background:#f9f9f9}.upload-add-btn[data-v-6287558c]:before, .upload-add-btn[data-v-6287558c]:after{content:" ";position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:%?4?%;height:%?60?%;background-color:#d6d6d6}.upload-add-btn[data-v-6287558c]:after{width:%?60?%;height:%?4?%}.upload-add-btn[data-v-6287558c]:active{background-color:#f7f7f7}',""]),t.exports=e},7569:function(t,e,a){"use strict";a.r(e);var n=a("779a"),i=a("fdbb");for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("cda1");var o=a("f0c5"),s=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"6287558c",null,!1,n["a"],void 0);e["default"]=s.exports},"779a":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"upload-content"},[t._l(t.imageList,(function(e,n){return[a("v-uni-view",{key:n+"_0",staticClass:"upload-item"},[e.url?a("v-uni-image",{staticClass:"upload-img",attrs:{src:t.baseURL+"/"+e.url,mode:"aspectFill"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previewImage(n)}}}):a("v-uni-view",{staticClass:"upload-img",staticStyle:{"background-color":"#C0C4CC"}}),a("v-uni-text",{staticClass:"myicon icon-round_delete upload-del-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.delImage(n)}}}),e.progress&&e.progress<100?a("v-uni-view",{staticClass:"upload-progress"},[t._v(t._s(e.progress)+"%")]):t._e()],1)]})),t.rduLength>0?a("v-uni-view",{staticClass:"upload-add-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseImage.apply(void 0,arguments)}}}):t._e()],2)},i=[]},a0bf:function(t,e,a){"use strict";a.r(e);var n=a("ca7f"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},ca7f:function(t,e,a){"use strict";(function(t){a("7a82");var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("5530")),r=n(a("7569")),o={components:{ImgUpload:r.default},data:function(){return{rules:{tel:{rules:[{required:!0,errorMessage:"请填写手机号"}]}},form:{}}},onShow:function(){this.getData()},methods:{getData:function(){var t=this;this.get("user/user_info").then((function(e){var a=e.code,n=e.user_info;1==a&&(t.form=n)}))},submit:function(){var e=this;this.$refs.form.validate().then((function(a){t.log("表单数据信息：",a),e.post("crud/save",(0,i.default)((0,i.default)({},e.form),{},{table:"user"})).then((function(t){var a=t.code,n=t.msg;1==a&&e.success(n)}))})).catch((function(e){t.log("表单错误信息：",e)}))}}};e.default=o}).call(this,a("5a52")["default"])},cda1:function(t,e,a){"use strict";var n=a("d087"),i=a.n(n);i.a},d087:function(t,e,a){var n=a("47a6");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("c52b2776",n,!0,{sourceMap:!1,shadowMode:!1})},fdbb:function(t,e,a){"use strict";a.r(e);var n=a("1299"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},fdd5:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return n}));var n={uniForms:a("d126").default,uniFormsItem:a("b018").default,uniEasyinput:a("b54b").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("StatusBar"),a("v-uni-view",{staticStyle:{padding:"10px 20px"}},[a("uni-forms",{ref:"form",attrs:{model:t.form,rules:t.rules}},[a("uni-forms-item",{attrs:{label:"名称",name:"nickname","label-width":"90px"}},[a("uni-easyinput",{attrs:{placeholder:" "},model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}})],1),a("uni-forms-item",{attrs:{label:"头像",name:"avatar_img","label-width":"90px"}},[a("ImgUpload",{attrs:{max:1},model:{value:t.form.avatar_img,callback:function(e){t.$set(t.form,"avatar_img",e)},expression:"form.avatar_img"}})],1),a("uni-forms-item",{attrs:{label:"电话",name:"tel","label-width":"90px"}},[a("uni-easyinput",{attrs:{placeholder:" "},model:{value:t.form.tel,callback:function(e){t.$set(t.form,"tel",e)},expression:"form.tel"}})],1)],1),a("v-uni-view",{staticClass:"btn-primary",staticStyle:{"margin-top":"30px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("保存")])],1)],1)},r=[]}}]);