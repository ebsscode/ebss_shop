(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-shop-cashier-pay"],{"3fc0":function(a,t,i){var e=i("65ad");e.__esModule&&(e=e.default),"string"===typeof e&&(e=[[a.i,e,""]]),e.locals&&(a.exports=e.locals);var n=i("4f06").default;n("1a7c2ea8",e,!0,{sourceMap:!1,shadowMode:!1})},4907:function(a,t,i){"use strict";i.r(t);var e=i("cb11"),n=i("9552");for(var s in n)["default"].indexOf(s)<0&&function(a){i.d(t,a,(function(){return n[a]}))}(s);i("9fad");var o=i("f0c5"),c=Object(o["a"])(n["default"],e["b"],e["c"],!1,null,"7e276184",null,!1,e["a"],void 0);t["default"]=c.exports},"65ad":function(a,t,i){var e=i("24fb");t=e(!1),t.push([a.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 通用 */\r\n/* 文字尺寸 */\r\n/* 页面配置 */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.app[data-v-7e276184]{width:100%}.price-box[data-v-7e276184]{background-color:#fff;height:%?265?%;display:flex;flex-direction:column;justify-content:center;align-items:center;font-size:%?28?%;color:#909399}.price-box .price[data-v-7e276184]{font-size:%?50?%;color:#303133;margin-top:%?12?%}.price-box .price[data-v-7e276184]:before{content:"￥";font-size:%?40?%}.pay-type-list[data-v-7e276184]{margin-top:%?20?%;background-color:#fff;padding-left:%?60?%}.pay-type-list .type-item[data-v-7e276184]{height:%?120?%;padding:%?20?% 0;display:flex;justify-content:space-between;align-items:center;padding-right:%?60?%;font-size:%?30?%;position:relative}.pay-type-list .icon[data-v-7e276184]{width:%?100?%;font-size:%?52?%}.pay-type-list .icon-erjiye-yucunkuan[data-v-7e276184]{color:#fe8e2e}.pay-type-list .icon-weixinzhifu[data-v-7e276184]{color:#36cb59}.pay-type-list .icon-alipay[data-v-7e276184]{color:#01aaef}.pay-type-list .tit[data-v-7e276184]{font-size:%?32?%;color:#303133;margin-bottom:%?4?%}.pay-type-list .con[data-v-7e276184]{flex:1;display:flex;flex-direction:column;font-size:%?24?%;color:#909399}.mix-btn[data-v-7e276184]{display:flex;align-items:center;justify-content:center;width:%?630?%;height:%?80?%;margin:%?80?% auto %?30?%;font-size:%?32?%;color:#fff;background-color:#27c2f3;border-radius:%?10?%;box-shadow:1px 2px 5px rgba(219,63,96,.4)}',""]),a.exports=t},9552:function(a,t,i){"use strict";i.r(t);var e=i("e36f"),n=i.n(e);for(var s in e)["default"].indexOf(s)<0&&function(a){i.d(t,a,(function(){return e[a]}))}(s);t["default"]=n.a},"9fad":function(a,t,i){"use strict";var e=i("3fc0"),n=i.n(e);n.a},cb11:function(a,t,i){"use strict";i.d(t,"b",(function(){return e})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){}));var e=function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("v-uni-view",{staticClass:"app"},[i("StatusBar"),i("v-uni-view",{staticClass:"price-box"},[i("v-uni-text",[a._v("支付金额")]),i("v-uni-text",{staticClass:"price"},[a._v(a._s(a.paylog?a.paylog.money:"0.00"))])],1),i("v-uni-view",{staticClass:"pay-type-list"},["mp-weixin"==a.platform||a.isWeixinBrowser?i("v-uni-view",{staticClass:"type-item b-b",on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.payType="wxpay_jsapi"}}},[i("v-uni-text",{staticClass:"icon wicon icon-weixinzhifu"}),i("v-uni-view",{staticClass:"con"},[i("v-uni-text",{staticClass:"tit"},[a._v("微信支付")]),i("v-uni-text",[a._v("推荐使用微信支付")])],1),i("v-uni-label",{staticClass:"radio"},[i("v-uni-radio",{attrs:{value:"",color:"#fa436a",checked:"wxpay_jsapi"==a.payType}})],1)],1):a._e(),"app"==a.platform?i("v-uni-view",{staticClass:"type-item b-b",on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.payType="wxpay_app"}}},[i("v-uni-text",{staticClass:"icon wicon icon-weixinzhifu"}),i("v-uni-view",{staticClass:"con"},[i("v-uni-text",{staticClass:"tit"},[a._v("微信支付")]),i("v-uni-text",[a._v("推荐使用微信支付")])],1),i("v-uni-label",{staticClass:"radio"},[i("v-uni-radio",{attrs:{value:"",color:"#fa436a",checked:"wxpay_app"==a.payType}})],1)],1):a._e(),"web"==a.platform?i("v-uni-view",{staticClass:"type-item b-b",on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.payType="alipay_web"}}},[i("v-uni-text",{staticClass:"icon wicon icon-zhifubao"}),i("v-uni-view",{staticClass:"con"},[i("v-uni-text",{staticClass:"tit"},[a._v("支付宝支付")])],1),i("v-uni-label",{staticClass:"radio"},[i("v-uni-radio",{attrs:{value:"",color:"#fa436a",checked:"alipay_web"==a.payType}})],1)],1):a._e(),"app"==a.platform?i("v-uni-view",{staticClass:"type-item b-b",on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.payType="alipay_app"}}},[i("v-uni-text",{staticClass:"icon wicon icon-zhifubao"}),i("v-uni-view",{staticClass:"con"},[i("v-uni-text",{staticClass:"tit"},[a._v("支付宝支付")])],1),i("v-uni-label",{staticClass:"radio"},[i("v-uni-radio",{attrs:{value:"",color:"#fa436a",checked:"alipay_app"==a.payType}})],1)],1):a._e(),"mp-alipay"==a.platform?i("v-uni-view",{staticClass:"type-item b-b",on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.payType="alipay_jsapi"}}},[i("v-uni-text",{staticClass:"icon wicon icon-zhifubao"}),i("v-uni-view",{staticClass:"con"},[i("v-uni-text",{staticClass:"tit"},[a._v("支付宝支付")])],1),i("v-uni-label",{staticClass:"radio"},[i("v-uni-radio",{attrs:{value:"",color:"#fa436a",checked:"alipay_jsapi"==a.payType}})],1)],1):a._e(),i("v-uni-view",{staticClass:"type-item",on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.payType="balance"}}},[i("v-uni-text",{staticClass:"icon wicon icon-zhanghuyue"}),i("v-uni-view",{staticClass:"con"},[i("v-uni-text",{staticClass:"tit"},[a._v("余额支付")]),i("v-uni-text",[a._v("可用余额 ¥"+a._s(a.user_info?a.user_info.money:"0.00"))])],1),i("v-uni-label",{staticClass:"radio"},[i("v-uni-radio",{attrs:{value:"",color:"#fa436a",checked:"balance"==a.payType}})],1)],1)],1),i("v-uni-text",{staticClass:"mix-btn",on:{click:function(t){arguments[0]=t=a.$handleEvent(t),a.confirm.apply(void 0,arguments)}}},[a._v("确认支付")])],1)},n=[]},e36f:function(a,t,i){"use strict";(function(a){i("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("e9c4"),i("99af");var e={data:function(){return{paylog:null,user_info:null,os:this.util.getOS(),platform:this.util.getPlatform(),isWeixinBrowser:this.util.isWeixinBrowser(),payType:"",orderInfo:{}}},computed:{},onLoad:function(a){var t=this;a.paylog_id?this.get("crud/detail",{table_id:a.paylog_id,table:"paylog"}).then((function(a){var i=a.code,e=a.detail;1==i&&(t.paylog=e)})):this.error("支付处理出错")},onShow:function(){var a=this;this.get("user/user_info").then((function(t){var i=t.code,e=t.user_info;1==i&&(a.user_info=e)}))},methods:{get_success_url:function(){return"goods_order"==this.paylog.type?"/pages/shop/order/orderlist?status=4":"money_charge"==this.paylog.type?"/pages/common/my/wallet":""},confirm:function(){0!=this.paylog.money?this.payType?"balance"==this.payType&&this.user_info.money<this.paylog.money?this.error("余额不足"):"alipay_web"!=this.payType?"alipay_app"!=this.payType?"alipay_jsapi"!=this.payType?"wxpay_jsapi"!=this.payType?"wxpay_app"!=this.payType?"balance"!=this.payType||this.balance():this.error("敬请期待"):this.wxpay_jsapi():this.alipay_jsapi():this.alipay_app():this.alipay_web():this.error("请选择支付方式"):this.zero_pay()},wxpay_jsapi:function(){var t=this;this.get("pay/wxpay_jsapi",{paylog_id:this.paylog.paylog_id}).then((function(i){var e=i.code,n=(i.msg,i.pay_data);1==e&&uni.requestPayment({provider:"wxpay",timeStamp:n.timeStamp,nonceStr:n.nonceStr,package:n.package,signType:n.signType,paySign:n.paySign,success:function(i){a.log("success:"+JSON.stringify(i)),t.redirect(t.get_success_url(),1200)},fail:function(t){a.log("fail:"+JSON.stringify(t))}})}))},alipay_app:function(){var t=this;this.get("pay/alipay_app",{paylog_id:this.paylog.paylog_id}).then((function(i){var e=i.code,n=(i.msg,i.pay_data);i.debug;1==e&&uni.requestPayment({provider:"alipay",orderInfo:n.body,success:function(a){t.success("支付成功！"),t.redirect(t.get_success_url(),1200)},fail:function(t){a.log("fail:",t)}})}))},alipay_jsapi:function(){var t=this;this.get("pay/alipay_jsapi",{paylog_id:this.paylog.paylog_id}).then((function(i){i.code,i.msg;var e=i.pay_data;i.debug;uni.requestPayment({provider:"alipay",orderInfo:e,success:function(a){t.success("支付成功！"),t.redirect(t.get_success_url(),1200)},fail:function(t){a.log("fail:",t)}})}))},balance:function(){var a=this;this.get("pay/balance",{paylog_id:this.paylog.paylog_id}).then((function(t){var i=t.code,e=t.msg;1==i&&(a.success(e),a.redirect(a.get_success_url(),1200))}))},zero_pay:function(){var a=this;this.get("pay/zero_pay",{paylog_id:this.paylog.paylog_id}).then((function(t){var i=t.code,e=t.msg;1==i&&(a.success(e),a.redirect(a.get_success_url(),1200))}))},alipay_web:function(){var a=this.get_success_url();window.location.href="".concat(this.baseURL,"/index/pay/alipay_web?redirect_url=").concat(encodeURIComponent("/h5/#".concat(a)),"&paylog_id=").concat(this.paylog.paylog_id,"&token=").concat(uni.getStorageSync("token"))}}};t.default=e}).call(this,i("5a52")["default"])}}]);