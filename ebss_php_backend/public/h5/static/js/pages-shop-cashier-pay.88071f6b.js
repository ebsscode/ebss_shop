(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-shop-cashier-pay"],{4907:function(a,i,t){"use strict";t.r(i);var e=t("4d42"),n=t("9552");for(var s in n)["default"].indexOf(s)<0&&function(a){t.d(i,a,(function(){return n[a]}))}(s);t("b9db");var o=t("f0c5"),c=Object(o["a"])(n["default"],e["b"],e["c"],!1,null,"a34b7450",null,!1,e["a"],void 0);i["default"]=c.exports},"4d42":function(a,i,t){"use strict";t.d(i,"b",(function(){return e})),t.d(i,"c",(function(){return n})),t.d(i,"a",(function(){}));var e=function(){var a=this,i=a.$createElement,t=a._self._c||i;return t("v-uni-view",{staticClass:"app"},[t("StatusBar"),t("v-uni-view",{staticClass:"price-box"},[t("v-uni-text",[a._v("支付金额")]),t("v-uni-text",{staticClass:"price"},[a._v(a._s(a.paylog?a.paylog.money:"0.00"))])],1),t("v-uni-view",{staticClass:"pay-type-list"},["mp-weixin"==a.platform||a.isWeixinBrowser?t("v-uni-view",{staticClass:"type-item b-b",on:{click:function(i){arguments[0]=i=a.$handleEvent(i),a.payType="wxpay_jsapi"}}},[t("v-uni-text",{staticClass:"icon wicon icon-weixinzhifu"}),t("v-uni-view",{staticClass:"con"},[t("v-uni-text",{staticClass:"tit"},[a._v("微信支付")]),t("v-uni-text",[a._v("推荐使用微信支付")])],1),t("v-uni-label",{staticClass:"radio"},[t("v-uni-radio",{attrs:{value:"",color:"#fa436a",checked:"wxpay_jsapi"==a.payType}})],1)],1):a._e(),"app"==a.platform?t("v-uni-view",{staticClass:"type-item b-b",on:{click:function(i){arguments[0]=i=a.$handleEvent(i),a.payType="wxpay_app"}}},[t("v-uni-text",{staticClass:"icon wicon icon-weixinzhifu"}),t("v-uni-view",{staticClass:"con"},[t("v-uni-text",{staticClass:"tit"},[a._v("微信支付")]),t("v-uni-text",[a._v("推荐使用微信支付")])],1),t("v-uni-label",{staticClass:"radio"},[t("v-uni-radio",{attrs:{value:"",color:"#fa436a",checked:"wxpay_app"==a.payType}})],1)],1):a._e(),"h5"==a.platform?t("v-uni-view",{staticClass:"type-item b-b",on:{click:function(i){arguments[0]=i=a.$handleEvent(i),a.payType="alipay_h5"}}},[t("v-uni-text",{staticClass:"icon wicon icon-zhifubao"}),t("v-uni-view",{staticClass:"con"},[t("v-uni-text",{staticClass:"tit"},[a._v("支付宝支付")])],1),t("v-uni-label",{staticClass:"radio"},[t("v-uni-radio",{attrs:{value:"",color:"#fa436a",checked:"alipay_h5"==a.payType}})],1)],1):a._e(),"web"==a.platform?t("v-uni-view",{staticClass:"type-item b-b",on:{click:function(i){arguments[0]=i=a.$handleEvent(i),a.payType="alipay_web"}}},[t("v-uni-text",{staticClass:"icon wicon icon-zhifubao"}),t("v-uni-view",{staticClass:"con"},[t("v-uni-text",{staticClass:"tit"},[a._v("支付宝支付")])],1),t("v-uni-label",{staticClass:"radio"},[t("v-uni-radio",{attrs:{value:"",color:"#fa436a",checked:"alipay_web"==a.payType}})],1)],1):a._e(),"app"==a.platform?t("v-uni-view",{staticClass:"type-item b-b",on:{click:function(i){arguments[0]=i=a.$handleEvent(i),a.payType="alipay_app"}}},[t("v-uni-text",{staticClass:"icon wicon icon-zhifubao"}),t("v-uni-view",{staticClass:"con"},[t("v-uni-text",{staticClass:"tit"},[a._v("支付宝支付")])],1),t("v-uni-label",{staticClass:"radio"},[t("v-uni-radio",{attrs:{value:"",color:"#fa436a",checked:"alipay_app"==a.payType}})],1)],1):a._e(),"mp-alipay"==a.platform?t("v-uni-view",{staticClass:"type-item b-b",on:{click:function(i){arguments[0]=i=a.$handleEvent(i),a.payType="alipay_jsapi"}}},[t("v-uni-text",{staticClass:"icon wicon icon-zhifubao"}),t("v-uni-view",{staticClass:"con"},[t("v-uni-text",{staticClass:"tit"},[a._v("支付宝支付")])],1),t("v-uni-label",{staticClass:"radio"},[t("v-uni-radio",{attrs:{value:"",color:"#fa436a",checked:"alipay_jsapi"==a.payType}})],1)],1):a._e(),t("v-uni-view",{staticClass:"type-item",on:{click:function(i){arguments[0]=i=a.$handleEvent(i),a.payType="balance"}}},[t("v-uni-text",{staticClass:"icon wicon icon-zhanghuyue"}),t("v-uni-view",{staticClass:"con"},[t("v-uni-text",{staticClass:"tit"},[a._v("余额支付")]),t("v-uni-text",[a._v("可用余额 ¥"+a._s(a.user_info?a.user_info.money:"0.00"))])],1),t("v-uni-label",{staticClass:"radio"},[t("v-uni-radio",{attrs:{value:"",color:"#fa436a",checked:"balance"==a.payType}})],1)],1)],1),t("v-uni-text",{staticClass:"mix-btn",on:{click:function(i){arguments[0]=i=a.$handleEvent(i),a.confirm.apply(void 0,arguments)}}},[a._v("确认支付")]),a._v(a._s(a.os)+"-"+a._s(a.platform)+a._s(a.isWeixinBrowser))],1)},n=[]},9552:function(a,i,t){"use strict";t.r(i);var e=t("e36f"),n=t.n(e);for(var s in e)["default"].indexOf(s)<0&&function(a){t.d(i,a,(function(){return e[a]}))}(s);i["default"]=n.a},b950:function(a,i,t){var e=t("d580");e.__esModule&&(e=e.default),"string"===typeof e&&(e=[[a.i,e,""]]),e.locals&&(a.exports=e.locals);var n=t("4f06").default;n("2634b24c",e,!0,{sourceMap:!1,shadowMode:!1})},b9db:function(a,i,t){"use strict";var e=t("b950"),n=t.n(e);n.a},d580:function(a,i,t){var e=t("24fb");i=e(!1),i.push([a.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 通用 */\r\n/* 文字尺寸 */\r\n/* 页面配置 */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.app[data-v-a34b7450]{width:100%}.price-box[data-v-a34b7450]{background-color:#fff;height:%?265?%;display:flex;flex-direction:column;justify-content:center;align-items:center;font-size:%?28?%;color:#909399}.price-box .price[data-v-a34b7450]{font-size:%?50?%;color:#303133;margin-top:%?12?%}.price-box .price[data-v-a34b7450]:before{content:"￥";font-size:%?40?%}.pay-type-list[data-v-a34b7450]{margin-top:%?20?%;background-color:#fff;padding-left:%?60?%}.pay-type-list .type-item[data-v-a34b7450]{height:%?120?%;padding:%?20?% 0;display:flex;justify-content:space-between;align-items:center;padding-right:%?60?%;font-size:%?30?%;position:relative}.pay-type-list .icon[data-v-a34b7450]{width:%?100?%;font-size:%?52?%}.pay-type-list .icon-erjiye-yucunkuan[data-v-a34b7450]{color:#fe8e2e}.pay-type-list .icon-weixinzhifu[data-v-a34b7450]{color:#36cb59}.pay-type-list .icon-alipay[data-v-a34b7450]{color:#01aaef}.pay-type-list .tit[data-v-a34b7450]{font-size:%?32?%;color:#303133;margin-bottom:%?4?%}.pay-type-list .con[data-v-a34b7450]{flex:1;display:flex;flex-direction:column;font-size:%?24?%;color:#909399}.mix-btn[data-v-a34b7450]{display:flex;align-items:center;justify-content:center;width:%?630?%;height:%?80?%;margin:%?80?% auto %?30?%;font-size:%?32?%;color:#fff;background-color:#27c2f3;border-radius:%?10?%;box-shadow:1px 2px 5px rgba(219,63,96,.4)}',""]),a.exports=i},e36f:function(a,i,t){"use strict";(function(a){t("7a82"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,t("e9c4"),t("99af");var e={data:function(){return{paylog:null,user_info:null,os:this.util.getOS(),platform:this.util.getPlatform(),isWeixinBrowser:this.util.isWeixinBrowser(),payType:"",orderInfo:{}}},computed:{},onLoad:function(a){var i=this;a.paylog_id?this.get("crud/detail",{table_id:a.paylog_id,table:"paylog"}).then((function(a){var t=a.code,e=a.detail;1==t&&(i.paylog=e)})):this.error("支付处理出错")},onShow:function(){var a=this;this.get("user/user_info").then((function(i){var t=i.code,e=i.user_info;1==t&&(a.user_info=e)}))},methods:{confirm:function(){this.payType?"balance"==this.payType&&this.user_info.money<this.paylog.money?this.error("余额不足"):"alipay_h5"!=this.payType?"alipay_web"!=this.payType?"alipay_app"!=this.payType?"alipay_jsapi"!=this.payType?"wxpay_jsapi"!=this.payType?"wxpay_app"!=this.payType&&"balance"!=this.payType||this.error("敬请期待"):this.wxpay_jsapi():this.error("敬请期待"):this.alipay_app():this.alipay_web():this.alipay_h5():this.error("请选择支付方式")},wxpay_jsapi:function(){this.get("pay/wxpay_jsapi",{paylog_id:this.paylog.paylog_id}).then((function(i){var t=i.code,e=(i.msg,i.pay_data);1==t&&uni.requestPayment({provider:"wxpay",timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign,success:function(i){a.log("success:"+JSON.stringify(i))},fail:function(i){a.log("fail:"+JSON.stringify(i))}})}))},alipay_app:function(){var i=this;this.get("pay/alipay_app",{paylog_id:this.paylog.paylog_id}).then((function(t){var e=t.code,n=(t.msg,t.pay_data),s=t.debug;a.log(2222,s,n),1==e&&uni.requestPayment({provider:"alipay",orderInfo:n.body,success:function(t){a.log("success:",t),i.success("支付成功！"),i.back("",1200)},fail:function(i){a.log("fail:",i)}})}))},alipay_h5:function(){},alipay_web:function(){window.location.href="".concat(this.baseURL,"/h5/#/index/pay/alipay_web?redirect_url=").concat(encodeURIComponent("/pages/shop/order/orderlist?status=4"),"&paylog_id=").concat(this.paylog.paylog_id,"&token=").concat(uni.getStorageSync("token"))}}};i.default=e}).call(this,t("5a52")["default"])}}]);