(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-shop-coupon-list"],{"06eb":function(t,n,e){var a=e("24fb");n=a(!1),n.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 通用 */\r\n/* 文字尺寸 */\r\n/* 页面配置 */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.gray-wrap[data-v-a0942b58]{-webkit-filter:grayscale(1);\r\n  /* Webkit */filter:gray;\r\n  /* IE6-9 */filter:grayscale(1)\r\n  /* W3C */}.nav-item[data-v-a0942b58]{flex:1;height:100%}.nav-item .item-title[data-v-a0942b58]{font-size:%?30?%;font-weight:400;color:#666}.nav-item .title-active[data-v-a0942b58]{font-size:%?32?%;font-weight:500;color:#333}.nav-item .nav-line[data-v-a0942b58]{width:%?128?%;height:%?6?%;border-radius:%?3?%;margin-top:5px}.nav-item .line-active[data-v-a0942b58]{background:#e9b664}.nav-wrap[data-v-a0942b58]{width:100%}.coupon-nav[data-v-a0942b58]{padding:0 %?30?%;margin-top:10px}.coupon-nav .nav-btn[data-v-a0942b58]{margin-right:%?10?%;font-size:%?26?%;color:#666;border-radius:5px;padding:5px 10px}.coupon-nav .btn-active[data-v-a0942b58]{font-size:%?26?%;color:#fff;background-color:#faae0c}.coupon-list[data-v-a0942b58]{margin:%?30?% %?20?%}.coupon-wrap[data-v-a0942b58]{-webkit-mask:url(https://h.vivivi.club/static/shop/coupon_bg1.png);mask:url(https://h.vivivi.club/static/shop/coupon_bg1.png);-webkit-mask-size:100% 100%;mask-size:100% 100%;position:relative;border-radius:%?10?%;width:100%;background:linear-gradient(90deg,#fcbd71,#f90)}.coupon-wrap .coupon-item[data-v-a0942b58]{width:100%;border-radius:%?10?%;padding:%?10?%}.coupon-wrap .coupon-item .coupon-left[data-v-a0942b58]{height:100%;justify-content:center;padding-left:%?40?%}.coupon-wrap .coupon-item .coupon-left .unit[data-v-a0942b58]{font-size:%?24?%;color:#fff}.coupon-wrap .coupon-item .coupon-left .sum[data-v-a0942b58]{font-size:%?55?%;font-weight:700;color:#fff;line-height:%?55?%;padding-right:%?10?%}.coupon-wrap .coupon-item .coupon-left .sub[data-v-a0942b58]{font-size:%?26?%;color:#fff}.coupon-wrap .coupon-item .coupon-left .notice[data-v-a0942b58]{font-size:%?22?%;color:hsla(0,0%,100%,.7);margin-top:%?6?%}.coupon-wrap .coupon-item .coupon-right[data-v-a0942b58]{width:%?220?%;justify-content:center;align-items:center}.coupon-wrap .coupon-item .coupon-right .get-btn[data-v-a0942b58]{width:%?142?%;height:%?54?%;background:#fff;border-radius:%?27?%;padding:0;font-size:%?24?%;font-weight:500;color:#f90}.coupon-wrap .coupon-item .coupon-right .surplus-num[data-v-a0942b58]{font-size:%?22?%;font-weight:500;color:#fff;margin-top:%?14?%}',""]),t.exports=n},"8dea":function(t,n,e){"use strict";e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return i})),e.d(n,"a",(function(){}));var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",{staticStyle:{"padding-top":"15px"}},[e("StatusBar"),e("v-uni-view",{},[e("v-uni-view",{staticClass:"flex-row nav-wrap"},t._l(t.navbarHeadState,(function(n,a){return e("v-uni-view",{key:a,staticClass:"nav-item flex-col justify-center align-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onHead(n.value)}}},[e("v-uni-view",{staticClass:"item-title",class:{"title-active":t.navState===n.value}},[t._v(t._s(n.title))]),e("v-uni-text",{staticClass:"nav-line",class:{"line-active":t.navState===n.value}})],1)})),1),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"user_coupon"===t.navState,expression:"navState === 'user_coupon'"}],staticClass:"coupon-nav flex-row"},t._l(t.couponsState,(function(n,a){return e("v-uni-view",{key:a,staticClass:"nav-btn flex-col justify-center align-center",class:{"btn-active":n.id==t.stateCurrent},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onNav(n.id)}}},[e("v-uni-view",{staticClass:"item-title"},[t._v(t._s(n.title))])],1)})),1)],1),e("v-uni-view",[t.coupon_list.length&&"coupon"==t.navState?t._l(t.coupon_list,(function(n,a){return e("v-uni-view",{key:a,staticClass:"coupon-list"},[e("v-uni-view",{staticClass:"coupon-wrap",class:{"gray-wrap":"end"==n.status}},[e("v-uni-view",{staticClass:"coupon-item flex-row justify-between"},[e("v-uni-view",{staticClass:"coupon-left flex-col "},[e("v-uni-view",{staticClass:"flex-row align-center"},[e("v-uni-text",{staticClass:"unit"},[t._v("￥")]),e("v-uni-view",{staticClass:"sum"},[t._v(t._s(n.amount)),e("v-uni-text",{staticStyle:{"font-size":"26rpx"}},[t._v(t._s(2==n.type?"折":"元"))])],1),e("v-uni-text",{staticClass:"sub"},[t._v(t._s(n.name))])],1),e("v-uni-view",{staticClass:"notice"},[t._v(t._s(n.full_amount>0?"满"+n.full_amount+"元可用":"无使用限制")),n.is_superimposed?e("v-uni-text",{staticClass:"sub"},[t._v("(可叠加使用)")]):t._e()],1),e("v-uni-view",{staticClass:"notice"},[t._v("有效期："+t._s(t.formatTime(n.start_time))+"-"+t._s(t.formatTime(n.expire_time)))])],1),e("v-uni-view",{staticClass:"coupon-right flex-col align-center"},["end"==n.status?e("v-uni-button",{staticClass:"get-btn align-center justify-center"},[t._v("已结束")]):e("v-uni-button",{staticClass:"get-btn align-center justify-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.nav("/pages/shop/coupon/detail?coupon_id="+n.coupon_id)}}},[t._v("立即领取")]),n.total-n.receive_total>0?e("v-uni-view",{staticClass:"surplus-num"},[t._v("仅剩"+t._s(n.total-n.receive_total)+"张")]):e("v-uni-view",{staticClass:"surplus-num"},[t._v("已领完")])],1)],1)],1)],1)})):t._e(),t.user_coupon_list.length&&"user_coupon"==t.navState?t._l(t.user_coupon_list,(function(n,a){return e("v-uni-view",{key:a},[1==t.stateCurrent&&4==n.status||2==t.stateCurrent&&5==n.status||3==t.stateCurrent&&6==n.status?e("v-uni-view",{staticClass:"coupon-list"},[e("v-uni-view",{staticClass:"coupon-wrap",class:{"gray-wrap":5==n.status||6==n.status}},[e("v-uni-view",{staticClass:"coupon-item flex-row justify-between"},[e("v-uni-view",{staticClass:"coupon-left flex-col "},[e("v-uni-view",{staticClass:"flex-row align-center"},[e("v-uni-text",{staticClass:"unit"},[t._v("￥")]),e("v-uni-view",{staticClass:"sum"},[t._v(t._s(n.coupon.amount)),e("v-uni-text",{staticStyle:{"font-size":"26rpx"}},[t._v(t._s(2==n.coupon.type?"折":"元"))])],1),e("v-uni-text",{staticClass:"sub"},[t._v(t._s(n.coupon.name))])],1),e("v-uni-view",{staticClass:"notice"},[t._v(t._s(n.coupon.full_amount>0?"满"+n.coupon.full_amount+"元可用":"无使用限制")),n.is_superimposed?e("v-uni-text",{staticClass:"sub"},[t._v("(可叠加使用)")]):t._e()],1),e("v-uni-view",{staticClass:"notice"},[t._v("有效期："+t._s(t.formatTime(n.coupon.start_time))+"-"+t._s(t.formatTime(n.coupon.expire_time)))])],1),e("v-uni-view",{staticClass:"coupon-right flex-col align-center"},[6==n.status?e("v-uni-button",{staticClass:"get-btn align-center justify-center"},[t._v("已过期")]):t._e(),5==n.status?e("v-uni-button",{staticClass:"get-btn align-center justify-center"},[t._v("已使用")]):t._e(),4==n.status?e("v-uni-button",{staticClass:"get-btn align-center justify-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.nav("/pages/shop/goods/goodslist?goods_ids="+n.coupon.goods_ids)}}},[t._v("去使用")]):t._e()],1)],1)],1)],1):t._e()],1)})):t._e(),!t.coupon_list.length&&"coupon"==t.navState||!t.user_coupon_list.length&&"user_coupon"==t.navState?e("Empty",{attrs:{tips_text:"暂无此类优惠券"}}):t._e()],2)],1)},i=[]},b57c:function(t,n,e){"use strict";e("7a82"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("d81d");n.default={components:{},data:function(){return{stateCurrent:0,navState:"coupon",navbarHeadState:[{value:"coupon",title:"领券中心"},{value:"user_coupon",title:"我的优惠券"}],couponsState:[{id:1,title:"可使用"},{id:2,title:"暂不可用"},{id:3,title:"无效优惠券"}],coupon_list:[],user_coupon_list:[]}},onLoad:function(){this.getData()},methods:{onNav:function(t){this.stateCurrent!=t&&(this.stateCurrent=t,this.getData())},onHead:function(t){this.navState!==t&&(this.navState=t,"coupon"===t&&(this.stateCurrent=0),"user_coupon"===t&&(this.stateCurrent=1),this.coupon_list=[],this.getData())},getData:function(){var t=this;"coupon"==this.navState&&this.post("crud/list",{table:"coupon"}).then((function(n){var e=n.code,a=n.paginate;1==e&&(t.coupon_list=a.data.map((function(n){var e=t.util.getTime10();return n.start_time>e&&(n.status="no_start"),e>=n.start_time&&e<=n.expire_time&&(n.status="start"),e>n.expire_time&&(n.status="end"),n})))})),"user_coupon"==this.navState&&this.get("coupon/my",{}).then((function(n){var e=n.code,a=n.list;1==e&&(t.user_coupon_list=a.map((function(n){t.util.getTime10();return n})))}))}}}},b5c4:function(t,n,e){var a=e("06eb");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=e("4f06").default;i("49a64ea8",a,!0,{sourceMap:!1,shadowMode:!1})},c630:function(t,n,e){"use strict";e.r(n);var a=e("8dea"),i=e("f461");for(var s in i)["default"].indexOf(s)<0&&function(t){e.d(n,t,(function(){return i[t]}))}(s);e("ebee");var o=e("f0c5"),u=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"a0942b58",null,!1,a["a"],void 0);n["default"]=u.exports},ebee:function(t,n,e){"use strict";var a=e("b5c4"),i=e.n(a);i.a},f461:function(t,n,e){"use strict";e.r(n);var a=e("b57c"),i=e.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){e.d(n,t,(function(){return a[t]}))}(s);n["default"]=i.a}}]);