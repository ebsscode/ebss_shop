(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-shop-mch-save"],{4695:function(t,e,n){"use strict";n.r(e);var a=n("7fe3"),o=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=o.a},6031:function(t,e,n){var a=n("b5c5");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=n("967d").default;o("1f21cfe8",a,!0,{sourceMap:!1,shadowMode:!1})},"6eb1":function(t,e,n){"use strict";n.r(e);var a=n("b5e7"),o=n("e99f");for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("ae71");var r=n("828b"),u=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"705d399a",null,!1,a["a"],void 0);e["default"]=u.exports},"760b":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-switch",{staticStyle:{transform:"scale(0.8)"},attrs:{checked:t.is_on,color:"#fa436a"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.change.apply(void 0,arguments)}}})},o=[]},"7e26":function(t,e,n){var a=n("a04f");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=n("967d").default;o("29eb8284",a,!0,{sourceMap:!1,shadowMode:!1})},"7fe3":function(t,e,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n("2634")),i=a(n("2fdc")),r=a(n("9b1b")),u=a(n("8346")),c=a(n("b283")),s=a(n("f49e")),f=a(n("6eb1")),l=a(n("f572")),d=a(n("9e84")),p=n("e2ef"),m={components:{ImgUpload:u.default,HTextArea:c.default,FormItem:s.default,HInput:f.default,FormWrapper:l.default,YesOrNo:d.default},data:function(){return{form:{}}},onLoad:function(t){t.mch_id&&(this.form.mch_id=t.mch_id,this.getData())},methods:{getData:function(){var t=this;this.post("crud/detail",{table:"mch",mch_id:this.form.mch_id}).then((function(e){var n=e.code,a=e.detail;1===n&&(t.form=a)}))},submit:function(t){var e=this;this.post("crud/save",(0,r.default)({table:"mch"},this.form)).then((function(t){var n=t.code;1===n&&(e.form.mch_id||(e.success("注册成功,等待审核中！"),e.redirect("/pages/index/index",1200)),e.success("更新成功"))}))},chooseMap:function(){var t=this;return(0,i.default)((0,o.default)().mark((function e(){var n;return(0,o.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,p.chooseLocation)();case 2:n=e.sent,1==n.code&&(t.form.longitude=n.longitude,t.form.latitude=n.latitude,t.form.province=n.province,t.form.city=n.city,t.form.district=n.district,t.form.address=n.address);case 4:case"end":return e.stop()}}),e)})))()}}};e.default=m},8240:function(t,e,n){"use strict";(function(t){n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("64aa");var a={name:"YesOrNo",props:{value:{type:Number,default:null},disabled:{type:Boolean,default:!1},changed:{type:Boolean,default:!1}},watch:{value:{handler:function(t,e){this.is_on=1==t},immediate:!0}},data:function(){return{is_on:!1}},methods:{change:function(e){t.log(e,555),this.$emit("update:value",e.detail.value?1:0),this.$emit("input",e.detail.value?1:0)}}};e.default=a}).call(this,n("ba7c")["default"])},9448:function(t,e,n){"use strict";n.r(e);var a=n("e5e4"),o=n("4695");for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("e3ef");var r=n("828b"),u=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"3d687ecd",null,!1,a["a"],void 0);e["default"]=u.exports},"9e84":function(t,e,n){"use strict";n.r(e);var a=n("760b"),o=n("ba7f");for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);var r=n("828b"),u=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"0dbe5d70",null,!1,a["a"],void 0);e["default"]=u.exports},a04f:function(t,e,n){var a=n("c86c");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 通用 */\n/* 文字尺寸 */\n/* 页面配置 */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.form-item[data-v-3d687ecd]{display:flex;align-items:center}',""]),t.exports=e},ae71:function(t,e,n){"use strict";var a=n("6031"),o=n.n(a);o.a},b5c5:function(t,e,n){var a=n("c86c");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 通用 */\n/* 文字尺寸 */\n/* 页面配置 */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.input[data-v-705d399a]{overflow-wrap:break-word;font-size:14px;text-align:left;white-space:nowrap;color:#000}',""]),t.exports=e},b5e7:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-input",{staticClass:"input",attrs:{placeholder:t.placeholder,focus:t.focus,disabled:t.disabled,maxlength:"-1"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.input.apply(void 0,arguments)}},model:{value:t.val,callback:function(e){t.val=e},expression:"val"}})},o=[]},ba7f:function(t,e,n){"use strict";n.r(e);var a=n("8240"),o=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=o.a},c726:function(t,e,n){"use strict";n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("64aa");var a={name:"HInput",props:{value:{type:[String,Number],default:""},placeholder:{type:String,default:"请输入.."},focus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},watch:{value:{handler:function(t,e){this.val=t},immediate:!0}},data:function(){return{val:""}},methods:{input:function(t){this.$emit("update:value",t.detail.value),this.$emit("input",t.detail.value)}}};e.default=a},e2ef:function(t,e,n){"use strict";(function(t){n("6a54");var a=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.openLocation=e.getLocation=e.getDistance=e.chooseLocation=void 0;var o=a(n("2634")),i=a(n("2fdc"));n("bf0f"),n("d4b5");var r=n("38df");e.getDistance=function(t,e,n,a){var o=t*Math.PI/180,i=n*Math.PI/180,r=o-i,u=e*Math.PI/180-a*Math.PI/180,c=2*Math.asin(Math.sqrt(Math.pow(Math.sin(r/2),2)+Math.cos(o)*Math.cos(i)*Math.pow(Math.sin(u/2),2)));return c*=6378.137,c=Math.round(1e4*c)/1e4,c.toFixed(2)};e.getLocation=function(){return new Promise((function(e,n){uni.getLocation({type:"gcj02",success:function(){var n=(0,i.default)((0,o.default)().mark((function n(a){var i,u;return(0,o.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i={},uni.setStorageSync("latitude",a.latitude),uni.setStorageSync("longitude",a.longitude),n.next=5,(0,r.http)("get","location/latlng_to_addr",{latitude:a.latitude,longitude:a.longitude});case 5:u=n.sent,u&&1==u.code?(uni.setStorageSync("location",u),i=u):t.error("getLocation-失败：",u),e(i);case 8:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),fail:function(e){t.error("获取位置失败:"+e.errMsg),n(e)},complete:function(e){var n=uni.getStorageSync("configs");n&&1==n.is_debug&&t.error(JSON.stringify(e))}})}))};e.chooseLocation=function(){return new Promise((function(e,n){uni.chooseLocation({type:"gcj02",success:function(){var n=(0,i.default)((0,o.default)().mark((function n(a){var i,u;return(0,o.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i={},n.next=3,(0,r.http)("get","location/latlng_to_addr",{latitude:a.latitude,longitude:a.longitude});case 3:u=n.sent,u&&1==u.code?i=u:t.error("chooseLocation-失败：",u),e(i);case 6:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),fail:function(e){t.error("选择位置失败:"+e.errMsg,2e3),n(e)}})}))};e.openLocation=function(e,n){uni.openLocation({latitude:1*n,longitude:1*e,success:function(){t.log("success")}})}}).call(this,n("ba7c")["default"])},e3ef:function(t,e,n){"use strict";var a=n("7e26"),o=n.n(a);o.a},e5e4:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticStyle:{padding:"20rpx 10px"}},[n("StatusBar"),n("TopBar",{attrs:{title:t.form.mch_id?"编辑":"商家入驻"}}),n("FormWrapper",{scopedSlots:t._u([{key:"item",fn:function(){return[n("FormItem",{attrs:{name:"店铺名称"},scopedSlots:t._u([{key:"input",fn:function(){return[n("HInput",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})]},proxy:!0}])}),n("FormItem",{attrs:{name:"详细地址"},scopedSlots:t._u([{key:"input",fn:function(){return[n("v-uni-view",{staticClass:"justify-between align-center"},[n("HInput",{model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}}),n("v-uni-text",{staticClass:"QQ811565456 hewei-shouhuodizhi",staticStyle:{"font-size":"20px",padding:"3px 4px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseMap.apply(void 0,arguments)}}})],1)]},proxy:!0}])}),n("FormItem",{attrs:{name:"简介"},scopedSlots:t._u([{key:"input",fn:function(){return[n("HInput",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})]},proxy:!0}])}),n("FormItem",{attrs:{name:"门头照片"},scopedSlots:t._u([{key:"input",fn:function(){return[n("ImgUpload",{attrs:{max:1},model:{value:t.form.logo_img,callback:function(e){t.$set(t.form,"logo_img",e)},expression:"form.logo_img"}})]},proxy:!0}])}),n("FormItem",{attrs:{name:"联系方式"},scopedSlots:t._u([{key:"input",fn:function(){return[n("HInput",{model:{value:t.form.tel,callback:function(e){t.$set(t.form,"tel",e)},expression:"form.tel"}})]},proxy:!0}])}),n("FormItem",{attrs:{name:"开启"},scopedSlots:t._u([{key:"input",fn:function(){return[n("YesOrNo",{model:{value:t.form.is_open,callback:function(e){t.$set(t.form,"is_open",e)},expression:"form.is_open"}})]},proxy:!0}])})]},proxy:!0}])}),n("v-uni-view",{staticClass:"btn-primary",staticStyle:{"margin-top":"10px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("提交")])],1)},o=[]},e99f:function(t,e,n){"use strict";n.r(e);var a=n("c726"),o=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=o.a}}]);