(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-video-index-play"],{"1cd6":function(t,e,i){"use strict";i.r(e);var n=i("e062"),o=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},2585:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 通用 */\r\n/* 文字尺寸 */\r\n/* 页面配置 */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.OperaCollection-container[data-v-ba210bac]{z-index:9999;background:#fff;width:%?750?%;border-radius:%?32?% %?32?% 0 0;box-sizing:border-box;padding:%?24?%}',""]),t.exports=e},"26b1":function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}));var n={uniPopup:i("bf16").default},o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"OperaCollection-container"},[i("uni-popup",{ref:"popup",attrs:{"mask-background-color":"rgba(0,0,0,0.4)",type:"bottom"}},[i("v-uni-view",{staticStyle:{padding:"10px",background:"#ffffff","border-top":"10px"}},[i("v-uni-view",{staticClass:"flex-col",staticStyle:{"padding-top":"10px","padding-bottom":"10px","border-bottom":"1px solid #c8c7cc","margin-bottom":"10px"}},[t.operaInfo?i("v-uni-text",{staticClass:"uifont",staticStyle:{"font-weight":"700","font-size":"18px"}},[t._v(t._s(t.operaInfo.name))]):t._e(),t.operacollectionList?i("v-uni-text",{staticClass:"uifont",staticStyle:{"font-size":"12px",color:"$C0C4CC","margin-top":"5px"}},[t._v("更新至第"+t._s(t.operacollectionList.total)+"集")]):t._e()],1),i("v-uni-view",{staticClass:"grid-container",staticStyle:{width:"100%"}},[i("v-uni-scroll-view",{staticStyle:{height:"35vh",width:"100%"},attrs:{"scroll-y":!0}},[i("v-uni-view",{staticClass:"justify-start",staticStyle:{"flex-wrap":"wrap",width:"100%"}},[t.operacollectionList&&t.operacollectionList.total?t._l(t.operacollectionList.data,(function(e,n){return i("v-uni-view",{key:n,staticStyle:{width:"30%",position:"relative",height:"170px","border-radius":"10px",margin:"0 1.5%","margin-bottom":"10px"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goPlay(e)}}},[i("v-uni-image",{staticStyle:{position:"absolute",width:"100%",height:"100%","border-radius":"10px","z-index":"1"},attrs:{src:t.baseURL+"/"+(t.configs.logo_img||t.operaInfo.logo_img),mode:""}}),i("v-uni-view",{staticStyle:{position:"absolute","background-color":"rgba(0, 0, 0, 0.3)",width:"100%",bottom:"0","text-align":"center","border-bottom-right-radius":"10px","border-bottom-left-radius":"10px","z-index":"3",color:"#ffffff"}},[t._v("第"+t._s(e.sort_num)+"集")])],1)})):t._e()],2)],1)],1)],1)],1)],1)},a=[]},3290:function(t,e,i){"use strict";i.r(e);var n=i("6759"),o=i("3dfd");for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);i("85da");var r=i("f0c5"),s=Object(r["a"])(o["default"],n["b"],n["c"],!1,null,"1a53f16e",null,!1,n["a"],void 0);e["default"]=s.exports},"33de":function(t,e,i){"use strict";(function(t){i("7a82");var n=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("d81d"),i("14d9"),i("c740");var o=n(i("2909")),a=n(i("c7eb")),r=n(i("1da1")),s=n(i("5a20")),c=uni.createInnerAudioContext();c.loop=!0;var d={components:{OperaCollection:s.default},data:function(){return{windowWidth:0,windowHeight:0,platform:"",model:"",deleteHeight:0,dataList:[],k:0,oldVideo:"",voice:"",timeout:"",current:0,boxStyle:{height:0,width:0},isShow:!1,showPlay:!1,rotates:0,rotateTime:"",xrotats:"",mpcleartime:"",isClick:!1,changeTimeout:"",mptime:0,mpstartTime:0,duration:500,opera_id:0,operaInfo:null,opera_collection_id:0,user_id:uni.getStorageSync("user_id")}},mounted:function(){var t=this;setTimeout((function(){t.$refs["OperaCollection"].open()}),2e3)},watch:{k:function(e,i){var n=this;return(0,r.default)((0,a.default)().mark((function o(){return(0,a.default)().wrap((function(o){while(1)switch(o.prev=o.next){case 0:n.isShow=!1,n.dataList[i].playIng=!1,n.dataList[i].isplay=!0,n.dataList[i].state="pause",t.log("预留第"+(i+1)+"个视频："+n.dataList[i]._id+i),uni.createVideoContext(n.dataList[i]._id+""+i,n).stop(),t.log("已经暂停 --\x3e 第"+(i+1)+"个视频～"),n.dataList[e].state="play",n.isShow=!0,n.xrotats=setTimeout((function(){n.showPlay=!0}),200),clearTimeout(n.changeTimeout),n.dataList[e].isplay=!1,setTimeout((function(){n.dataList[e].playIng=!0}),250),n.mptime<.2?n.changeTimeout=setTimeout((function(){uni.createVideoContext(n.dataList[n.k]._id+""+n.k,n).play()}),1400):uni.createVideoContext(n.dataList[n.k]._id+""+n.k,n).play();case 14:case"end":return o.stop()}}),o)})))()}},onLoad:function(t){var e=this;this.opera_id=t.opera_id,t.opera_collection_id&&(this.opera_collection_id=t.opera_collection_id),this.platform=uni.getSystemInfoSync().platform,this.model=uni.getSystemInfoSync().model;var i=this.model;"ios"!=this.platform||"iPhone6"===i&&"iPhone6s"===i&&"iPhone7"===i&&"iPhone8"===i||(this.deleteHeight=0),this.windowWidth=uni.getSystemInfoSync().windowWidth,this.windowHeight=uni.getSystemInfoSync().windowHeight,this.boxStyle.width=this.windowWidth+"px",this.boxStyle.height=this.windowHeight-this.deleteHeight,this.get("crud/detail",{table:"opera",table_id:this.opera_id}).then((function(t){var i=t.code,n=t.detail;1==i&&(e.operaInfo=n,e.getData())}))},onShow:function(){0!==this.dataList.length&&(this.dataList[this.k].state="play",uni.createVideoContext(this.dataList[this.k]._id+""+this.k,this).play())},onHide:function(){this.dataList[this.k].state="pause",uni.createVideoContext(this.dataList[this.k]._id+""+this.k,this).pause()},methods:{mpTouchend:function(){this.mptime=new Date/1e3-this.mpstartTime},mpTouchstart:function(){this.mpstartTime=new Date/1e3},clearTime:function(){for(var t=0;t<20;t++)clearTimeout(this.rotateTime),clearTimeout(this.xrotats)},play:function(){t.log("start play")},ended:function(){},timeupdate:function(t){},tapVideoHover:function(e,i){t.log("state--",e),this.dataList[this.k].state="play"==e||"continue"==e?"pause":"continue","continue"==this.dataList[this.k].state&&(this.isClick=!0,this.dataList[this.k].playIng=!0,uni.createVideoContext(this.dataList[this.k]._id+""+this.k,this).play(),this.dataList[this.k].isplay=!1),"pause"==this.dataList[this.k].state&&(uni.createVideoContext(this.dataList[this.k]._id+""+this.k,this).pause(),this.dataList[this.k].isplay=!0)},change:function(t){var e=t.detail.current;this.k=e},stopTouchMove:function(e){t.log("stopTouchMove",e)},animationfinish:function(e){this.k==this.dataList.length-1&&(t.log("全部播放完了"),this.error("当前播放为最后一集"))},getData:function(){var e=this;this.get("crud/list",{table:"opera_collection",opera_id:this.opera_id,limit:9999}).then((function(i){var n=i.code,a=i.paginate;if(1==n){var r;e.isShow=!1;var s=a.data,c=s.map((function(t){return t.isplay=!0,t.playIng=!1,t.src=e.baseURL+"/"+t.video_url,t.state="pause",t._id=t.opera_collection_id,t}));(r=e.dataList).push.apply(r,(0,o.default)(c));var d=0;if(e.opera_collection_id){var l=e.dataList.findIndex((function(t){return t.opera_collection_id==e.opera_collection_id}));l>=0&&(d=l)}t.log("now_k",d),setTimeout((function(){e.isShow=!0,e.dataList[d].isplay=!1,e.dataList[d].state="play",e.dataList[d].playIng=!0,setTimeout((function(){uni.createVideoContext(e.dataList[d]._id+""+d,e).play(),e.current=d}),500)}),200),e.opera_collection_id=e.dataList[d]._id}}))}}};e.default=d}).call(this,i("5a52")["default"])},"35f1":function(t,e,i){"use strict";var n=i("ca29"),o=i.n(n);o.a},"3dfd":function(t,e,i){"use strict";i.r(e);var n=i("33de"),o=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},"5a20":function(t,e,i){"use strict";i.r(e);var n=i("26b1"),o=i("1cd6");for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);i("35f1");var r=i("f0c5"),s=Object(r["a"])(o["default"],n["b"],n["c"],!1,null,"ba210bac",null,!1,n["a"],void 0);e["default"]=s.exports},6759:function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}));var n={uniIcons:i("829c").default},o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("StatusBar"),i("v-uni-swiper",{style:"width: "+t.windowWidth+"px; height: "+t.windowHeight+"px; background-color: #000000;",attrs:{vertical:!0,current:t.current,"indicator-dots":!1},on:{animationfinish:function(e){arguments[0]=e=t.$handleEvent(e),t.animationfinish.apply(void 0,arguments)},change:function(e){arguments[0]=e=t.$handleEvent(e),t.change.apply(void 0,arguments)},touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.mpTouchstart.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.mpTouchend.apply(void 0,arguments)}}},t._l(t.dataList,(function(e,n){return i("v-uni-swiper-item",{key:n,attrs:{catchtouchmove:"stopTouchMove"}},[Math.abs(t.k-n)<=1?i("v-uni-view",[i("v-uni-view",[t.isShow?i("v-uni-video",{style:"width: "+t.windowWidth+"px; height: "+t.windowHeight+"px; background-color: #000000; z-index: -1;",attrs:{id:e._id+""+n,loop:!0,muted:e.isplay,controls:!1,"http-cache":!0,"page-gesture":!1,"show-fullscreen-btn":!1,"show-loading":!1,"show-center-play-btn":!1,"enable-progress-gesture":!1,src:e.src,poster:t.baseURL+"/"+t.operaInfo.logo_img},on:{play:function(e){arguments[0]=e=t.$handleEvent(e),t.play.apply(void 0,arguments)},ended:function(e){arguments[0]=e=t.$handleEvent(e),t.ended.apply(void 0,arguments)},timeupdate:function(e){arguments[0]=e=t.$handleEvent(e),t.timeupdate.apply(void 0,arguments)},click:function(i){arguments[0]=i=t.$handleEvent(i),t.tapVideoHover(e.state,i)}}}):t._e(),e.playIng?t._e():i("v-uni-image",{style:"width: "+t.windowWidth+"px; height: "+t.windowHeight+"px; position: absolute;",attrs:{src:t.baseURL+"/"+t.operaInfo.logo_img,mode:"aspectFit"}})],1),i("v-uni-view",{staticClass:"videoHover",style:"width: "+t.windowWidth+"px; height: "+t.windowHeight+"px;",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.tapVideoHover(e.state,i)}}},["pause"==e.state?i("v-uni-text",{staticClass:"myicon icon-c164zanting playState"}):t._e()],1),i("v-uni-view",{staticClass:"content"},[t.operaInfo?i("v-uni-view",{staticClass:"name flex align-center"},[t._v(t._s(t.operaInfo.name))]):t._e(),t.operaInfo?i("v-uni-view",{staticClass:"flex align-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$refs["OperaCollection"].open()}}},[t._v("共"+t._s(t.dataList.length)+"集 ，当前播放"+t._s(t.dataList[t.k].sort_num)+"集"),i("uni-icons",{attrs:{type:"forward",size:"14",color:"#ffffff"}})],1):t._e()],1)],1):t._e()],1)})),1),i("OperaCollection",{ref:"OperaCollection",attrs:{opera_id:t.opera_id,opera_collection_id:t.opera_collection_id}})],1)},a=[]},8052:function(t,e,i){var n=i("b74e");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("371fcba4",n,!0,{sourceMap:!1,shadowMode:!1})},"85da":function(t,e,i){"use strict";var n=i("8052"),o=i.n(n);o.a},b74e:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 通用 */\r\n/* 文字尺寸 */\r\n/* 页面配置 */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.container[data-v-1a53f16e]{background-color:#000}.item[data-v-1a53f16e]{\r\n  /* width : 750rpx; */background-color:#000;position:relative}.videoHover[data-v-1a53f16e]{position:absolute;top:0;left:0;flex:1;display:flex;background-color:rgba(0,0,0,.1);justify-content:center;align-items:center\r\n  /* border-style: dashed;\r\n\tborder-color: #DD524D;\r\n\tborder-width: 1px; */}.playState[data-v-1a53f16e]{opacity:.5;font-size:70px;color:#fff}.userInfo[data-v-1a53f16e]{position:absolute;bottom:110px;right:10px;flex-direction:column}.content[data-v-1a53f16e]{width:%?720?%;z-index:99;position:absolute;bottom:30px;\r\n  /* justify-content: center; */padding:%?15?%;font-size:%?28?%;display:flex;align-items:center;justify-content:space-between;color:#fff}.userName[data-v-1a53f16e]{font-size:%?30?%;color:#fff;margin-top:%?80?%}.words[data-v-1a53f16e]{margin-top:%?10?%;font-size:%?30?%;color:#fff}.root[data-v-1a53f16e]{background-color:#000}',""]),t.exports=e},ca29:function(t,e,i){var n=i("2585");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("3982079c",n,!0,{sourceMap:!1,shadowMode:!1})},e062:function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("a9e3");var n={name:"OperaCollection",components:{},props:{opera_id:{type:[Number,String],default:0},opera_collection_id:{type:[Number,String],default:0}},data:function(){return{baseURL:this.baseURL,configs:uni.getStorageSync("configs"),operaInfo:null,operacollectionList:null,userInfo:{}}},created:function(){var t=this;this.get("crud/detail",{table:"opera",table_id:this.opera_id}).then((function(e){var i=e.code,n=e.detail;1==i&&(t.operaInfo=n)})),this.get("crud/list",{table:"opera_collection",opera_id:this.opera_id}).then((function(e){var i=e.code,n=e.paginate;1==i&&(t.operacollectionList=n)})),this.get("user/user_info").then((function(e){var i=e.code,n=e.user_info;1==i&&(t.userInfo=n)}))},methods:{goPlay:function(t){this.redirect("/pages/video/index/play?opera_id="+t.opera_id+"&opera_collection_id="+t.opera_collection_id)},open:function(){this.$refs.popup.open()},close:function(){this.$refs.popup.close()}}};e.default=n}}]);